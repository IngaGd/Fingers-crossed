<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/pages/home.css">
    <link rel="stylesheet" href="./css/pages/cart.css">
    <link rel="stylesheet" href="https://fonts.cdnfonts.com/css/codec-pro">
    <style>
        @import url('https://fonts.cdnfonts.com/css/codec-pro');
    </style>
    <title>Shopping list</title>
</head>

<body>
    <nav class="main-header">
        <a class="link" href="aboutUs.html">Apie mus</a>
        <a class="link" href="https://fingers-crossed-nail-studio.mytreatwell.lt/services.html">Kainos</a>
        <a class="link" href="#">Galerija</a>
        <a class="logo-link" href="index.html">
            <img class="logo" src="./img/logo/Fingers_crossed_logopos_small.png" alt="Logo">
        </a>
        <a class="link" href="Shop.html">Parduotuvė</a>
        <a class="link" href="contacts.html">Kontaktai</a>
        <a class="link" href="cart.html">
            <i class="fa fa-shopping-cart"></i>
        </a>
        <a class="btn" href="https://fingers-crossed-nail-studio.mytreatwell.lt/?fbclid=PAAaZ1c67PnrUYjey9ZzL7tUeaZ0k4f3P8zsvxOLFeZBP1QSRvGSs4y-K_rW8">Rezervuok</a>
    </nav>
    <div class="nav-mob">
        <a class="logo-link-mob" href="index.html">
            <img class="logo" src="./img/logo/Fingers_crossed_logopos_small.png" alt="Logo">
        </a>
        <div class="dropdown">
            <button class="link">
                <i class="fa fa-bars" aria-hidden="true"></i>
            </button>
            <div class="dropdown-menu active">
                <a class="link" href="aboutUs.html">Apie mus</a>
                <a class="link" href="https://fingers-crossed-nail-studio.mytreatwell.lt/services.html">Kainos</a>
                <a class="link" href="#">Galerija</a>
                <a class="link" href="Shop.html">Parduotuvė</a>
                <a class="link" href="contacts.html">Kontaktai</a>
                <a class="link" href="cart.html">Krepšelis</a>
                <a class="btn" href="https://fingers-crossed-nail-studio.mytreatwell.lt/?fbclid=PAAaZ1c67PnrUYjey9ZzL7tUeaZ0k4f3P8zsvxOLFeZBP1QSRvGSs4y-K_rW8">Rezervuok</a>
            </div>
        </div>
    </div>
    <section class="container cart">
        <div class="row">
            <ul class="cart-list" id="cartList"></ul>
        </div>
    </section>
    <div id="sum-total"></div>

    <section class="container footer">
        <div class="row">
            <img class="logo footer" src="./img/logo/Fingers_crossed_logopos_small.png" alt="Logo">
            <div class="left-content">
                <div class="socials">
                    <a href="https://www.facebook.com/FingersCrossedNailStudio" class="icon fa fa-facebook"></a>
                    <a href="https://www.instagram.com/fingers_crossed_studio/" class="icon fa fa-instagram"></a>
                </div>
                <div class="terms"><a href="terms.html">Pristatymo sąlygos</a></div>
                <div class="copyright ">Copyright &copy; 2023</div>
            </div>
        </div>
    </section>
    <script>
        let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

        cartItems.forEach(item => {
            const listItem = document.createElement('li');
            listItem.classList.add('list-item');
            const imgContainer = document.createElement('div');
            imgContainer.classList.add('img-container');
            const descrContainer = document.createElement('div');
            descrContainer.classList.add('description-container');
            const description = document.createElement('div');
            description.classList.add('description');
            const priceContainer = document.createElement('div');
            priceContainer.classList.add('price-container');
            const qtyContainer = document.createElement('div');
            qtyContainer.classList.add('quantity-container');
            const listText1 = document.createElement('p');
            listText1.classList.add('item-title');
            const listText2 = document.createElement('p');
            listText2.classList.add('item-price');
            const listText3 = document.createElement('p');
            listText3.classList.add('item-quantity');
            const listText4 = document.createElement('p');
            listText4.classList.add('item-price-total');
            const listText5 = document.createElement('p');
            listText5.classList.add('item-descriprion')
            const listBtn = document.createElement('button');
            listBtn.classList.add('remove-btn');
            const itemImage = document.createElement('img');
            itemImage.classList.add('item-img');
            const addBtn = document.createElement('button');
            addBtn.classList.add('add-btn');
            const reduceBtn = document.createElement('button');
            reduceBtn.classList.add('reduce-btn');

            itemImage.src = item.imageSrc;
            listText1.textContent = item.title;
            listText2.textContent = item.price;
            listText3.textContent = item.quantity;
            listText5.textContent = item.description;
            listBtn.textContent = 'Pašalinti';
            addBtn.textContent = '+';
            reduceBtn.textContent = '-';
            listText4.textContent = item.quantity * item.price;
            console.log(listText4.textContent);

            const cartList = document.getElementById('cartList');
            cartList.appendChild(listItem);
            listItem.appendChild(imgContainer);
            imgContainer.appendChild(itemImage);
            listItem.appendChild(descrContainer);
            descrContainer.appendChild(description);
            description.appendChild(listText1);
            description.appendChild(listText5);
            descrContainer.appendChild(priceContainer);
            priceContainer.appendChild(listText2);
            priceContainer.appendChild(qtyContainer);
            qtyContainer.appendChild(listText3);
            qtyContainer.appendChild(addBtn);
            qtyContainer.appendChild(reduceBtn);
            priceContainer.appendChild(listText4);
            descrContainer.appendChild(listBtn);


            listBtn.addEventListener('click', () => {
                const index = cartItems.indexOf(item);
                if (index > -1) {
                    cartItems.splice(index, 1);
                }
                localStorage.setItem('cartItems', JSON.stringify(cartItems));
                cartList.removeChild(listItem);
            });

            addBtn.addEventListener('click', () => {
                const index = cartItems.indexOf(item);
                if (index > -1) {
                    let incr = parseInt(listText3.textContent);
                    listText3.textContent = incr + 1;
                    let total = parseFloat(listText2.textContent).toFixed(2) * parseFloat(listText3.textContent).toFixed(2);
                    listText4.textContent = total;
                }
            });

            reduceBtn.addEventListener('click', () => {
                const index = cartItems.indexOf(item);
                if (index > -1) {
                    let decr = parseInt(listText3.textContent);
                    listText3.textContent = decr - 1;
                    let total = parseFloat(listText2.textContent).toFixed(2) * parseFloat(listText3.textContent).toFixed(2);
                    listText4.textContent = total;
                }
            });
        });

    </script>
</body>

</html>