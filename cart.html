<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/pages/home.css">
    <link rel="stylesheet" href="https://fonts.cdnfonts.com/css/codec-pro">
    <style>
        @import url('https://fonts.cdnfonts.com/css/codec-pro');
    </style>
    <title>Shopping list</title>
</head>

<body>
    <nav class="main-header">
        <a class="link" href="aboutUs.html">Apie mus</a>
        <a class="link" href="https://fingers-crossed-nail-studio.mytreatwell.lt/services.html">Kainos</a>
        <a class="link" href="#">Galerija</a>
        <a class="logo-link" href="index.html">
            <img class="logo" src="./img/logo/Fingers_crossed_logopos_small.png" alt="Logo">
        </a>
        <a class="link" href="Shop.html">Parduotuvė</a>
        <a class="link" href="contacts.html">Kontaktai</a>
        <a class="link" href="cart.html">
            <i class="fa fa-shopping-cart"></i>
        </a>
        <a class="btn" href="https://fingers-crossed-nail-studio.mytreatwell.lt/?fbclid=PAAaZ1c67PnrUYjey9ZzL7tUeaZ0k4f3P8zsvxOLFeZBP1QSRvGSs4y-K_rW8">Rezervuok</a>
    </nav>
    <div class="nav-mob">
        <a class="logo-link-mob" href="index.html">
            <img class="logo" src="./img/logo/Fingers_crossed_logopos_small.png" alt="Logo">
        </a>
        <div class="dropdown">
            <button class="link">
                <i class="fa fa-bars" aria-hidden="true"></i>
            </button>
            <div class="dropdown-menu active">
                <a class="link" href="aboutUs.html">Apie mus</a>
                <a class="link" href="https://fingers-crossed-nail-studio.mytreatwell.lt/services.html">Kainos</a>
                <a class="link" href="#">Galerija</a>
                <a class="link" href="Shop.html">Parduotuvė</a>
                <a class="link" href="contacts.html">Kontaktai</a>
                <a class="link" href="cart.html">Krepšelis</a>
                <a class="btn" href="https://fingers-crossed-nail-studio.mytreatwell.lt/?fbclid=PAAaZ1c67PnrUYjey9ZzL7tUeaZ0k4f3P8zsvxOLFeZBP1QSRvGSs4y-K_rW8">Rezervuok</a>
            </div>
        </div>
    </div>
    <ul id="cartList"></ul>
    <div id="sum-total"></div>
    <script>
        let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

        cartItems.forEach(item => {
            const listItem = document.createElement('li');
            const listText1 = document.createElement('p');
            const listText2 = document.createElement('p');
            const listText3 = document.createElement('p');
            const listText4 = document.createElement('p');
            const listBtn = document.createElement('button');
            const itemImage = document.createElement('img');
            const addBtn = document.createElement('button');
            const reduceBtn = document.createElement('button');

            itemImage.src = item.imageSrc;
            listText1.textContent = item.title;
            listText2.textContent = item.price;
            listText3.textContent = item.quantity;
            listBtn.textContent = 'Remove';
            addBtn.textContent = '+';
            reduceBtn.textContent = '-';
            listText4.textContent = item.quantity * item.price;
            console.log(listText4.textContent);

            const cartList = document.getElementById('cartList');
            cartList.appendChild(listItem);
            listItem.appendChild(itemImage);
            listItem.appendChild(listText1);
            listItem.appendChild(listText2);
            listItem.appendChild(listText3);
            listItem.appendChild(listText4);
            listItem.appendChild(listBtn);
            listItem.appendChild(addBtn);
            listItem.appendChild(reduceBtn);


            listBtn.addEventListener('click', () => {
                const index = cartItems.indexOf(item);
                if (index > -1) {
                    cartItems.splice(index, 1);
                }
                localStorage.setItem('cartItems', JSON.stringify(cartItems));
                cartList.removeChild(listItem);
            });

            addBtn.addEventListener('click', () => {
                const index = cartItems.indexOf(item);
                if (index > -1) {
                    let incr = parseInt(listText3.textContent);
                    listText3.textContent = incr + 1;
                    let total = parseFloat(listText2.textContent).toFixed(2) * parseFloat(listText3.textContent).toFixed(2);
                    listText4.textContent = total;
                }
            });

            reduceBtn.addEventListener('click', () => {
                const index = cartItems.indexOf(item);
                if (index > -1) {
                    let decr = parseInt(listText3.textContent);
                    listText3.textContent = decr - 1;
                    let total = parseFloat(listText2.textContent).toFixed(2) * parseFloat(listText3.textContent).toFixed(2);
                    listText4.textContent = total;
                }
            });
        });

    </script>
</body>

</html>